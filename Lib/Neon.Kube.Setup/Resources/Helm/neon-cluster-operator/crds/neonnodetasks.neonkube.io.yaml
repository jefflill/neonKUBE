apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: neonnodetasks.neonkube.io
spec:
  group: neonkube.io
  names:
    kind: NeonNodeTask
    plural: neonnodetasks
    shortNames: []
    singular: neonnodetask
  scope: Cluster
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          Describes a task to be executed as a Bash script on a node by the neon-node-agent pod
           running on the target cluster node.
           The node agent currently executes one node task at a time in no guaranteed order.
        properties:
          spec:
            description: The spec.
            properties:
              node:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              bashScript:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              startAfterTimestamp:
                description: Represents a value type that can be assigned null.
                format: date-time
                type: string
              startBeforeTimestamp:
                description: Represents a value type that can be assigned null.
                format: date-time
                type: string
              timeoutSeconds:
                description: Represents a 32-bit signed integer.
                format: int32
                type: integer
              retentionSeconds:
                description: Represents a 32-bit signed integer.
                format: int32
                type: integer
              captureOutput:
                description: Represents a Boolean (true or false) value.
                type: boolean
            required:
            - node
            - bashScript
            - timeoutSeconds
            - retentionSeconds
            - captureOutput
            type: object
          status:
            description: The spec.
            properties:
              agentId:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              phase:
                description: Indicates the current task phase.  This defaults to Neon.Kube.Resources.Cluster.V1NeonNodeTask.Phase.New.
                enum:
                - new
                - pending
                - running
                - timeout
                - orphaned
                - tardy
                - failed
                - success
                type: string
              startTimestamp:
                description: Represents a value type that can be assigned null.
                format: date-time
                type: string
              finishTimestamp:
                description: Represents a value type that can be assigned null.
                format: date-time
                type: string
              runtimeSeconds:
                description: Represents a 32-bit signed integer.
                format: int32
                type: integer
              commandLine:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              runId:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              processId:
                description: Represents a value type that can be assigned null.
                format: int32
                type: integer
              exitCode:
                description: Represents a 32-bit signed integer.
                format: int32
                type: integer
              output:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
              error:
                description: Represents text as a sequence of UTF-16 code units.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}